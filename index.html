<!DOCTYPE html>
<html>
	<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Regular Maintainance Report</title>
	<link rel="stylesheet" href="css/fb-style.min.css" />
	<link rel="stylesheet" href="css/jquery.mobile.structure-1.4.3.min.css">
  	<link rel="stylesheet" href="css/jquery.mobile.icons-1.4.3.min.css">
	<link rel="stylesheet" href="css/carousel.css">
	<link rel="stylesheet" href="css/carousel-style.css">
	<script src="js/jquery.js"></script>
	<script src="js/jquery.mobile-1.4.3.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
	<style id="inset-tablist">
		.tablist-left {
			width: 25%;
			display: inline-block;
		}
		.tablist-content {
			width: 73%;
			display: inline-block;
			vertical-align: top;
			margin-left: 1%;
		}
		#photo{
			width: 50%;
			display: inline-block;
			vertical-align: top;
			margin-left: 7%;
			margin-right: 4%;
			margin-top: 8%;
		}
		#menu{
			width: 30%;
			display: inline-block;
			vertical-align: top;
			margin-top: 18%;
			margin-left: 1%;
		}
		.m-image{
			width: 80%;
		
			display: block;
    margin: 0 auto;
			
		}
		
		#maint_report_btn:after { background:  url("images/report.png") 50% 50% no-repeat;  background-size: 24px 24px; }
		#emergency_report_btn:after { background:  url("images/repair.png") 50% 50% no-repeat;  background-size: 24px 24px; }
	
	</style>
	 <script type="text/javascript" charset="utf-8">

			// Wait for device API libraries to load
			//
			document.addEventListener("deviceready", onDeviceReady, false);
			
			// device APIs are available
			//
			function onDeviceReady() {
				
				window.localStorage.setItem("key", "{sss}");
			
				// keyname is now equal to "key"
				var value = window.localStorage.getItem("key");
				// value is now equal to "value"
			
				window.localStorage.setItem("key2", "value2");
				
					
				
				
				
				$("#testDiv").html("<span>"+value+"</span>");
		
				
				
				
				
			}
	$(document).ready(function(){
			
					alert("home");
					var report=	{
									"name" : "maintain report",
									"type" : 0,
									"customers_id": "",
									"cycle_type" : 1,
									"created_by" : "Thomas",
									"created_at" : "2014-06-09 23:27:35",
									"updated_at" : "2014-06-09 23:27:35",
									"froms" :[]
									};

							
					
					$("#maint_report_btn").click(function (e) {
						   
						   window.localStorage.setItem("report", JSON.stringify(report));
						   alert("store report");
					});			
			

			$( "#report" ).on( "pagecreate", function( event,ui ) {
				
				var report =JSON.parse(window.localStorage.getItem("report")); 
				alert(window.localStorage.getItem("report"));

				var empty_chimney_froms={
			"name_cn":"",
			"name_en":"",
			"from_type": "chimney",
			"device_id": "",
			"device_mode": "",
			"inspector":"",
			"device_photo":"",
			"items": [{
						
						"item_name_en": "Check the LED lamp by pressing the lamp test switch",
						"item_name_cn": "按測試開關並檢查LED燈",
						"index": 1,
						"cycle": 1,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },
					 {
						"item_name_en": "Check for any abnormal noises inside the control panels",
						"item_name_cn": "檢查控制箱內的任何異常聲音",
						"index": 2,
						"cycle": 1,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },
					 {
						"item_name_en": "Check the emergency stop function",
						"item_name_cn": "檢查緊急停止功能",
						"index": 3,
						"cycle": 1,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },
					 {
						"item_name_en": "Check the Interlock function with related boiler",
						"item_name_cn": "檢查相關於鍋爐的聯鎖功能",
						"index": 4,
						"cycle": 1,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },
					 {
						"item_name_en": "Check the Manual mode control function",
						"item_name_cn": "檢查手動模式控制功能",
						"index": 5,
						"cycle": 1,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },
					 {
						"item_name_en": "Check the Auto mode control function",
						"item_name_cn": "檢查自動模式控制功能",
						"index": 6,
						"cycle": 1,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },
					 {
						"item_name_en": "Check the main switch operation of control",
						"item_name_cn": "檢查主開關的操作控制",
						"index": 7,
						"cycle": 1,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },
					 {
						"item_name_en": "Check for all flexible connection for leakage",
						"item_name_cn": "檢查所有軟連接是否有洩漏",
						"index": 8,
						"cycle": 1,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false",
								   "min_photos": 1,
								   "photos" : []
								   }
					 },
					 {
						"item_name_en": "Insulation;   (MΩ)",
						"item_name_cn": "絕緣度（MΩ）",
						"index": 9,
						"cycle": 1,
						"group": "controller",
						"result": {"type" : "s_value",
								   "value" : "",
								   "unit" : "MΩ",
								   "min_photos": 1,
								   "photos" : []
								   }
					 },
					 {
						"item_name_en": "Check condition of electric contact of contactor, starter and control",
						"item_name_cn": "檢查電接點的接觸器，起動和控制的條件",
						"index": 10,
						"cycle": 2,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },
					 {
						"item_name_en": "Check the function of the control value",
						"item_name_cn": "檢查控制閥的功能",
						"index": 11,
						"cycle": 2,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },
					 {
						"item_name_en": "Clean up control panels",
						"item_name_cn": "清理乾淨控制箱",
						"index": 12,
						"cycle": 2,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },
					 {
						"item_name_en": "Starting / Running current  (A)",
						"item_name_cn": "開始/運行電流（A）",
						"index": 13,
						"cycle": 2,
						"group": "controller",
						"result": {"type" : "s_value",
								   "value" : "",
								   "unit" : "A",
								   "min_photos": 1,
								   "photos" : []
								   }
					 },{
						"item_name_en": "Test the MCB operation in the control panel",
						"item_name_cn": "測試控制箱中的MCB操作",
						"index": 14,
						"cycle": 2,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },{
						"item_name_en": "Test the trip function",
						"item_name_cn": "測試跳閘功能",
						"index": 15,
						"cycle": 2,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },{
						"item_name_en": "Inspect the electrical circuits and controls, tighten all electrical connection",
						"item_name_cn": "檢查電路和控制，擰緊所有的電氣連接",
						"index": 16,
						"cycle": 2,
						"group": "controller",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },{
						"item_name_en": "Check the flexible join of the exhaust Fan",
						"item_name_cn": "檢查排氣扇的軟連接",
						"index": 17,
						"cycle": 1,
						"group": "fan",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },{
						"item_name_en": "Check for any leakage on the chimmney connection",
						"item_name_cn": "檢查煙囪的連接是否有洩漏",
						"index": 18,
						"cycle": 1,
						"group": "fan",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },{
						"item_name_en": "Check the pressure of chimney",
						"item_name_cn": "檢查煙囪的壓力",
						"index": 19,
						"cycle": 2,
						"group": "chimney",
						"result": {"type" : "bool",
								   "value" : "false"
								   }
					 },{
						"item_name_en": "Check the surface temperature of Chimney ( °C )",
						"item_name_cn": "檢查的煙囪表面的溫度( °C )",
						"index": 19,
						"cycle": 2,
						"group": "chimney",
						"result": {"type" : "s_value",
								   "value" : "",
								   "unit" : "A"
								   }
					 }
					]
		};	

					var customers= [
								{ 	"id" : "1",
									"name_cn" : "十六浦",
									"name_en" : "Ponte 16 Resort Macau",
									"seq" :"MM-0608020-10",
									"created_at" :"2014-06-09 23:27:35"
								},
								{ 	"id": "2",
									"name_cn": "蘭桂坊",
									"name_en": "Lan Kwai Fong",
									"seq":"MM-LM-10007-11",
									"created_at": "2014-06-09 23:27:35"
								},
								{ 	"id": "3",
									"name_cn": "凱旋門",
									"name_en": "L'Arc Macau",
									"seq": "MM-0606014-05",
									"created_at": "2014-06-09 23:27:35"
								},
								{ 	"id": "4",
									"name_cn": "新葡京",
									"name_en": "Grand Lisboa",
									"seq":"MM-0406012-04",
									"created_at":"2014-06-09 23:27:35"
								},
								{ 	"id": "5",
									"name_cn": "金沙",
									"name_en": "Sands Macau",
									"seq":"MM-0603005-02",
									"created_at":"2014-06-09 23:27:35"
								},
								{ 	"id": "6",
									"name_cn": "星際",
									"name_en": "Star World",
									"seq":"MM_LM-100903-12",
									"created_at":"2014-06-09 23:27:35"
								},
								{ 	"id": "7",
									"name_cn": "四季",
									"name_en": "Four Season Hotel",
									"seq":"MM_LM-100903-12",
									"created_at":"2014-06-09 23:27:35"
								},
								{ 	"id": "8",
									"name_cn": "威尼斯人一期",
									"name_en": "Venetian Cotai",
									"seq": "MM-0505001-15",
									"created_at": "2014-06-09 23:27:35"
								},
								{ 	"id": "9",
									"name_cn": "威尼斯人5,6期",
									"name_en": "Sands Cotai",
									"seq": "MM-0601006-17",
									"created_at": "2014-06-09 23:27:35"
								}
								];
							
						var cycles=[{ 	"value": "1",
									"name_cn": "月檢",
									"name_en": "Monthly"
								
								},{ 	"value": "2",
									"name_cn": "雙月檢",
									"name_en": "Even Monthly"
								
								},{ 	"value": "3",
									"name_cn": "半年檢",
									"name_en": "Semi-Annually"
								
								},{ 	"value": "4",
									"name_cn": "年檢",
									"name_en": "Annually"
								
								}];
						
						alert(customers.length);
						for(var index in customers){ 
								$("#customers").append($('<option>', {
									value: customers[index].id,
									text: customers[index].name_en}));
						}
						
						for(var index in cycles){ 
								$("#cycle").append($('<option>', {
									value: cycles[index].value,
									text: cycles[index].name_en}));
						}
						$('select').selectmenu('refresh', true);
						
						
						$("#customers").bind( "change", function(event, ui) {
							
							report.customers_id=$("#customers").val();
							window.localStorage.setItem("report", JSON.stringify(report));
							
						});
						
						$("#cycle").bind( "change", function(event, ui) {
							
							report.cycle_type=$("#cycle").val();
							window.localStorage.setItem("report", JSON.stringify(report));
						});
						$("#add_btn").click(function (e) {
						   
						    window.localStorage.setItem("currentForm", JSON.stringify(empty_chimney_froms));

						});

						for(var index in report.froms){ 
					  			addFromInCatalog("chimney_list",report.froms[index]);
						}
						$('chimney_list').listview('refresh');
						
			});

			
});
			function addFromInCatalog(parent,from){
					$("#chimney_list").append('<li class="ui-li-has-alt ui-li-has-thumb ui-first-child"><a href="#" class="ui-btn">\
					<img src="images/report.png">\
				<h3>Heat Transfer Compact Unit Report 1</h3>\
				<p>14/25 last updated: 2014/8/17 12:33</p></a>\
					<a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop" aria-haspopup="true" aria-\
					owns="purchase" aria-expanded="false" class="ui-btn ui-btn-icon-notext ui-icon-edit ui-btn-a" title="Purchase \
					album"></a>\
				</li>');

						
					
			}

    </script>
</head>
<body>

		<div data-role="page" id="home" style="background-image: url('images/bg.png'); background-attachment: fixed; background-repeat: no-repeat; background-size: 100% 100%;"  >
			<div id="testDiv">6666</div>
			<div data-role="header" data-position="fixed" data-theme="b"  >
				
						  <h1>IES Maintainance Report App</h1>
						 <div data-role="controlgroup" data-type="horizontal" class="ui-btn-right ui-corner-all">
							<a href="#" class="ui-btn ui-corner-all">中</a>
							<a href="#" class="ui-btn ui-btn-a ui-corner-all ">EN</a>
						</div>
				</div><!-- /header -->
				
				<div id="photo" class="m-carousel m-fluid m-carousel-photos ">
				  <div class="m-carousel-inner">
					<div class="m-item">
					  <div class="m-card-light">
						<img class="m-image" src="images/1.png">
						
					  </div>
					</div>
					<div class="m-item">
					  <div class="m-card-light">
						<img class="m-image"  src="images/2.png">
						
					  </div>
					</div>
					<div class="m-item">
					  <div class="m-card-light">
						<img  class="m-image"  src="images/3.png">
						
					  </div>
					</div>
				  </div>
				
				  <!-- the controls -->
				  <div class="m-carousel-controls m-carousel-bulleted">
				
					<a href="#" data-slide="1" class="m-active">1</a>
					<a href="#" data-slide="2">2</a>
					<a href="#" data-slide="3">3</a>
				
				  </div>
				  
				</div>
				<div id="menu" data-role="controlgroup" data-theme="b"  >
				<a id="maint_report_btn"  href="#report" data-icon="custom"  data-transition="pop" class="ui-btn ui-alt-icon ui-btn-icon-top ui-corner-all ui-shadow ">Maintenance Report</a>
				<a id="emergency_report_btn"  href="#report" data-icon="custom"  data-transition="pop" class="ui-btn ui-alt-icon ui-btn-icon-top ui-corner-all ui-shadow ">Emergency Report</a>
				
				</div>
		
		</div>		
		<div data-role="page" id="report" >
			 <div data-role="header" data-position="fixed"  >
			 <a href="#" data-rel="back"  class="ui-btn  ui-btn-left ui-alt-icon ui-nodisc-icon ui-corner-all ui-btn-icon-left ui-icon-carat-l">Back</a>
	      
					  <h1>Maintainance Report</h1>
					<div data-role="controlgroup" data-type="horizontal" class="ui-mini ui-btn-right">
						<select data-native-menu="false" id="customers" name="select-choice-1" id="select-choice-1" >
							
						</select>
						<select data-native-menu="false" id="cycle" name="select-choice-1" id="select-choice-1" >
							
						</select>
			
					</div>
			</div><!-- /header -->
	
		
		    <div data-role="tabs" >
		      	<ul data-role="listview" data-inset="true"  class="tablist-left">
			      <li><a href="#heat_tab" data-ajax="false" data-transition="turn">Heat Transfer<br/> Compact Unit</a></li>
			      <li><a href="#boiler_tab" data-ajax="false" data-transition="turn">Hot Water <br/>Boiler </a></li>
			      <li><a href="#chimney_tab" data-ajax="false" data-transition="turn">Chimney<br/>system </a></li>
			    </ul>
		<div id="heat_tab" class="tablist-content" class="ui-content" >
			<ul id="heat_list" data-role="listview" data-split-icon="edit" data-split-theme="a" data-inset="true">
				<li><a href="#">
					<img src="images/report.png">
				<h3>Heat Transfer Compact Unit Report 1</h3>
				<p>14/25 last updated: 2014/8/17 12:33</p></a>
					<a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Purchase album</a>
				</li>
				<li><a href="#">
					<img src="images/report.png">
				<h3>Heat Transfer Compact Unit Report 2</h3>
				<p>25/25 last updated: 2014/8/17 12:33</p></a>
					<a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Purchase album</a>
				</li>
				<li><a href="#">
					<img src="images/report.png">
				<h3>Heat Transfer Compact Unit Report 3</h3>
				<p>22/25 last updated: 2014/8/17 12:33</p></a>
					<a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Purchase album</a>
				</li>
			</ul>
		</div>	    
		<div id="boiler_tab" class="tablist-content" class="ui-content" >
			<ul id="boiler_list" data-role="listview" data-split-icon="edit" data-split-theme="a" data-inset="true">
				<li><a href="#">
					<img src="images/report.png">
				<h3>Hot Water Boiler Report 1</h3>
				<p>14/25 last updated: 2014/8/17 12:33</p></a>
					<a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Purchase album</a>
				</li>
				<li><a href="#">
					<img src="images/report.png">
				<h3>Hot Water Boiler Report 2</h3>
				<p>25/25 last updated: 2014/8/17 12:33</p></a>
					<a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Purchase album</a>
				</li>
				<li><a href="#">
					<img src="images/report.png">
				<h3>Hot Water Boiler Report 3</h3>
				<p>22/25 last updated: 2014/8/17 12:33</p></a>
					<a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Purchase album</a>
				</li>
			</ul>
		</div>
			
		
		<div id="chimney_tab" class="tablist-content" class="ui-content" >
			<ul id="chimney_list" data-role="listview" data-split-icon="edit" data-split-theme="a" data-inset="true">
				
			</ul>
		</div>
			</div>	

				
		<div data-role="footer" data-theme="b" data-position="fixed">
			
				<div class="ui-bar">
					
				 	
				</div>
				<div data-role="controlgroup" data-type="horizontal" class="ui-mini ui-btn-left">
					<a id="add_btn" href="chimney_system.html" rel="external" class="ui-btn ui-btn-icon-right ui-icon-plus">Add</a>
					<a href="#" class="ui-btn ui-btn-icon-right ui-icon-bullets">Copy</a>
					<a href="#" class="ui-btn ui-btn-icon-right ui-icon-delete">Delete</a>
				
				</div>	
					
			   <h1></h1>
			<a href="#" class="ui-btn-right ui-btn ui-btn-b ui-btn-inline ui-mini ui-corner-all ui-btn-icon-right ui-icon-check">Save</a>
	    
		</div>
	</div>		

	<script src="js/carousel.js"></script>
	<!-- construct the carousel -->
	<script>$('.m-carousel').carousel()</script>	
			
</body>
</html>
